<?xml version="1.0" encoding="UTF-8"?>

<!--

This file has been created by developers from BitBag.
Feel free to contact us once you face any issues or want to start
another great project.
You can find more information about us on https://bitbag.shop and write us
an email on mikolaj.krol@bitbag.pl.

-->

<container xmlns="http://symfony.com/schema/dic/services" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">
    <services>
        <defaults autowire="false" autoconfigure="false" public="false" />

        <service id="bit_bag.sylius_graphql_plugin.resolver.mutation.login_resolver"
                 class="BitBag\SyliusGraphqlPlugin\Resolver\Mutation\LoginResolver">
            <argument type="service" id="doctrine.orm.entity_manager" />
            <argument type="service" id="security.encoder_factory" />
            <argument type="service" id="bit_bag.sylius_graphql_plugin.factory.shop_user_token_factory" />
            <argument type="service" id="bit_bag.sylius_graphql_plugin.service.refresh_token_manager" />
            <tag name="api_platform.graphql.mutation_resolver" />
        </service>

        <service id="bit_bag.sylius_graphql_plugin.resolver.mutation.refresh_token_resolver"
                 class="BitBag\SyliusGraphqlPlugin\Resolver\Mutation\RefreshTokenResolver">
            <argument type="service" id="doctrine.orm.entity_manager" />
            <argument type="service" id="bit_bag.sylius_graphql_plugin.factory.shop_user_token_factory" />
            <argument type="string" >%bitbag_graphql.model.refresh_token.class%</argument>
            <tag name="api_platform.graphql.mutation_resolver" />
        </service>

        <service id="bit_bag.sylius_graphql_plugin.resolver.mutation.order_invoices_list_resolver"
                 class="BitBag\SyliusGraphqlPlugin\Resolver\Mutation\OrderInvoicesListResolver">
            <argument type="service" id="sylius.repository.order" />
            <argument type="service" id="doctrine.orm.entity_manager" />
            <argument type="service" id="sylius.api.context.user" />
            <argument type="service" id="api_platform.router" />
            <argument type="string" >%bitbag_graphql.model.invoice.class%</argument>
            <tag name="api_platform.graphql.mutation_resolver" />
        </service>

        <service id="bit_bag.sylius_graphql_plugin.resolver.order_address_state_resolver"
                 class="BitBag\SyliusGraphqlPlugin\Resolver\OrderAddressStateResolver">
            <argument type="service" id="sm.factory" />
        </service>
    </services>
</container>
